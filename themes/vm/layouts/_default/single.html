{{ define "main" }}
  <nav class="breadcrumb" aria-label="Breadcrumb">
    <a href="{{ "/" | relURL }}">Home</a>
    <span class="breadcrumb-sep">/</span>
    <a href="{{ "/posts/" | relURL }}">Posts</a>
    <span class="breadcrumb-sep">/</span>
    <span>{{ .Title }}</span>
  </nav>

  <article>
    <header class="post-header">
      <h1>{{ .Title }}</h1>
      <div class="post-meta">
        <time datetime="{{ .Date.Format "2006-01-02" }}"><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg> {{ .Date.Format "Jan 2, 2006" }}</time>
        <span>&middot;</span>
        <span><svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg> {{ .ReadingTime }} min read</span>
        {{ with .Params.tags }}<span>&middot;</span>{{ range . }}<span class="post-tag"><a href="{{ "/tags/" | relURL }}{{ . | urlize }}">{{ . }}</a></span>{{ end }}{{ end }}
      </div>
    </header>

    {{- $toc := .TableOfContents -}}
    {{- if gt (len $toc) 100 -}}
    <details class="toc" open>
      <summary><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/></svg> Contents</summary>
      <nav>{{ $toc }}</nav>
    </details>
    {{- end -}}

    <div class="post-content">{{ .Content }}</div>

    {{ with .Params.tags }}
    <div class="post-tags">
      {{ range . }}<a href="{{ "/tags/" | relURL }}{{ . | urlize }}">#{{ . }}</a>{{ end }}
    </div>
    {{ end }}

    <div class="post-share">
      <span><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg> Share:</span>
      <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ .Permalink | urlquery }}" target="_blank" rel="noopener noreferrer">LinkedIn</a>
      <a href="https://x.com/intent/tweet?url={{ .Permalink | urlquery }}&text={{ .Title | urlquery }}" target="_blank" rel="noopener noreferrer">X</a>
    </div>

    <nav class="post-nav" aria-label="Post navigation">
      {{ with .PrevInSection }}
      <a href="{{ .Permalink }}" class="post-nav-prev">
        <span class="post-nav-label">← Previous</span>
        {{ .Title }}
      </a>
      {{ end }}
      {{ with .NextInSection }}
      <a href="{{ .Permalink }}" class="post-nav-next">
        <span class="post-nav-label">Next →</span>
        {{ .Title }}
      </a>
      {{ end }}
    </nav>

    {{ partial "comments.html" . }}
  </article>
{{ end }}
